<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Gatsby Starter Blog RSS Feed]]></title><description><![CDATA[Tech Blog]]></description><link>https://yonglog.netlify.app</link><generator>GatsbyJS</generator><lastBuildDate>Fri, 26 Apr 2024 14:12:57 GMT</lastBuildDate><item><title><![CDATA[JS 드래그 앤 드롭(Drag and Drop) 구현하기]]></title><description><![CDATA[지난 프로젝트에서 pdf viewer 내부에서 pan and zoom 기능을 구현했다.
먼저 이번 포스트를 통해 JS로 드래그 앤 드롭을 구현할 예정이다. Drag
 먼저 마우스 이동거리 계산을 위해 mouseDown…]]></description><link>https://yonglog.netlify.app/darg-drop/</link><guid isPermaLink="false">https://yonglog.netlify.app/darg-drop/</guid><pubDate>Sat, 20 Apr 2024 22:12:03 GMT</pubDate><content:encoded>&lt;p&gt;지난 프로젝트에서 pdf viewer 내부에서 pan and zoom 기능을 구현했다.
먼저 이번 포스트를 통해 JS로 드래그 앤 드롭을 구현할 예정이다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://portfolio-yong.s3.ap-northeast-2.amazonaws.com/blog/drag/drag.gif&quot; alt=&quot;Drag&quot;&gt;
&lt;br/&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; startX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; startY&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; initialX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; initialY&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;먼저 마우스 이동거리 계산을 위해 mouseDown 좌표를 저장할 변수(&lt;code class=&quot;language-text&quot;&gt;startX&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;startY&lt;/code&gt;)와 드래그 하고자 하는 요소 (이하 draggable)의 초기 위치를 저장하기 위한 변수(&lt;code class=&quot;language-text&quot;&gt;initialX&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;initialY&lt;/code&gt;)를 생성한다.
&lt;br/&gt;
&lt;br/&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;draggable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;mousedown&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    startX &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;clientX&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    startY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;clientY&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    initialX &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; draggable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;offsetLeft&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 요소의 현재 left 값을 저장&lt;/span&gt;
    initialY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; draggable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;offsetTop&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// 요소의 현재 top 값을 저장&lt;/span&gt;
    isDragging &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    draggable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;style&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cursor &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;grabbing&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이후 draggable 요소에 &lt;code class=&quot;language-text&quot;&gt;mousedown&lt;/code&gt; eventListener를 추가해준다. &lt;br/&gt;
&lt;code class=&quot;language-text&quot;&gt;e.clientX&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;e.clientY&lt;/code&gt;를 통해 mouseDown이 발생했을 때 마우스 좌표를 startX,Y값을 startX, startY에 저장하고,&lt;br/&gt;
&lt;code class=&quot;language-text&quot;&gt;offsetLeft&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;offsetTop&lt;/code&gt;을 이용해 요소의 현재 위치를 &lt;code class=&quot;language-text&quot;&gt;initialX&lt;/code&gt; &lt;code class=&quot;language-text&quot;&gt;initialY&lt;/code&gt;에 저장한다. &lt;br/&gt;
&lt;/br&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;이 코드에서는 draggable의 부모가 body이기 때문에 offsetLeft, Top을 사용했다.
상황에 따라 다르게 사용해야한다!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;br/&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;mousemove&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isDragging&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; moveX &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;clientX &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; startX &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; initialX&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; moveY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;clientY &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; startY &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; initialY&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        draggable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;style&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;left &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;moveX&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;px&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        draggable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;style&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;top &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;moveY&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;px&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이번엔 mousemove 이벤트 리스너를 추가한다.
여기서 &lt;code class=&quot;language-text&quot;&gt;e.clientX&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;e.clientY&lt;/code&gt;를 사용하여 현재 마우스 위치에서 &lt;code class=&quot;language-text&quot;&gt;mousedown&lt;/code&gt; 시점의 좌표를 빼고, 초기 위치(&lt;code class=&quot;language-text&quot;&gt;initialX&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;initialY&lt;/code&gt;)를 더해 최종적인 요소의 위치를 계산한다.&lt;/br&gt;&lt;/p&gt;
&lt;p&gt;그리고 드래그 후 드랍한 위치에서 다시 드래그를 하려면 &lt;code class=&quot;language-text&quot;&gt;initialX,Y&lt;/code&gt;를 꼭 더해줘야한다. &lt;/br&gt;
&lt;code class=&quot;language-text&quot;&gt;e.clientX&lt;/code&gt; - &lt;code class=&quot;language-text&quot;&gt;startX&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;e.clientY&lt;/code&gt; - &lt;code class=&quot;language-text&quot;&gt;startY&lt;/code&gt;는 0에서부터 증가한다.&lt;/br&gt;
drop을 하고 다시 잡아끄는 순간 0이되면서 &lt;code class=&quot;language-text&quot;&gt;draggable.style.left&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;draggable.style.top&lt;/code&gt;값이 0이되면서 초기 렌더되는 위치로 돌아간다.&lt;/br&gt;
&lt;/br&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;단순하게 마우스 이동거리만 계산 했다가 원하는 대로 이동하지 않았던 경험이 있다ㅠ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/br&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;mouseup&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isDragging&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        isDragging &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        draggable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;style&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cursor &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;grab&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 커서 스타일 복원&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;드래그를 종료하기 위해 mouseup 이벤트를 document에 추가한다.&lt;/br&gt;
마우스 버튼을 놓을 때, isDragging 플래그를 false로 설정하여 드래그 상태를 해제하고, 커서 스타일을 원래대로 돌려놓는다. &lt;/br&gt;&lt;/br&gt;&lt;/p&gt;
&lt;p&gt;코드 &amp;#x26; 결과물&lt;/p&gt;
&lt;iframe 
    height=&quot;400&quot; style=&quot;width: 100%;&quot; scrolling=&quot;no&quot; title=&quot;Untitled&quot; 
    src=&quot;https://codepen.io/yongho1212/embed/gOyBjzW?default-tab=html%2Cresult&quot; 
    frameborder=&quot;no&quot; loading=&quot;lazy&quot; allowtransparency=&quot;true&quot; allowfullscreen=&quot;true&quot;
    &gt;
    See the Pen 
    &lt;a href=&quot;https://codepen.io/yongho1212/pen/gOyBjzW&quot;&gt;
        Untitled
    &lt;/a&gt; 
    by yongho1212 (&lt;a href=&quot;https://codepen.io/yongho1212&quot;&gt;@yongho1212&lt;/a&gt;)
    on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.
&lt;/iframe&gt;</content:encoded></item></channel></rss>